<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Chelsea Nicole ‚Äî Feliz Anivers√°rio, meu bem!</title>

  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fbf6f0;
      --paper:#f7efe3;
      --rose:#f6c2d1;
      --text:#3b2b2b;
      --muted:#6f5f58;
      --maxw:980px;
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;background:var(--bg);font-family:Inter,system-ui,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
    body{display:flex;justify-content:center;padding:20px;line-height:1.4;color:var(--text)}

    .container{
      width:100%;
      max-width:var(--maxw);
      background:linear-gradient(180deg, rgba(255,255,255,0.95), rgba(255,255,255,0.98));
      border-radius:18px;
      box-shadow:0 12px 40px rgba(20,12,12,0.08);
      overflow:visible;
      display:flex;
      flex-direction:column;
    }

    header{
      display:flex;flex-wrap:wrap;gap:18px;align-items:center;padding:26px;background:linear-gradient(180deg, rgba(218,192,176,0.08), transparent);
    }
    .avatar{width:96px;height:96px;border-radius:50%;overflow:hidden;border:6px solid rgba(255,255,255,0.75);flex:0 0 96px;box-shadow:0 8px 20px rgba(246,194,209,0.18);}
    .avatar img{width:100%;height:100%;object-fit:cover;display:block}
    .meta{flex:1;min-width:180px}
    h1{font-family:"Playfair Display",serif;margin:0;font-size:20px;color:#6b2d3a}
    p.lead{margin-top:6px;color:var(--muted);font-size:14px}

    .controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin-top:10px}
    .btn{background:linear-gradient(180deg,var(--rose),#ffdfe6);border:0;padding:8px 14px;border-radius:12px;font-weight:600;cursor:pointer;box-shadow:0 8px 18px rgba(246,194,209,0.14);}
    .btn.ghost{background:transparent;border:1px solid rgba(58,42,42,0.06);box-shadow:none}

    main{padding:20px;display:flex;flex-direction:column;gap:18px;overflow:visible}

    .columns{display:grid;grid-template-columns:1fr 360px;gap:18px;width:100%}
    .card{background:var(--paper);border-radius:14px;padding:16px;box-shadow:0 6px 20px rgba(0,0,0,0.03);overflow:visible}
    .card h2{font-family:Playfair Display,serif;margin-bottom:8px;color:#6b2d3a}
    .story{color:var(--muted);line-height:1.5}

    .gallery{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}
    .thumb{border-radius:10px;overflow:hidden;aspect-ratio:1/1;cursor:pointer;background:#efe8dd;display:flex;align-items:center;justify-content:center}
    .thumb img,.thumb video{width:100%;height:100%;object-fit:cover;display:block;transition:transform .35s ease}
    .thumb:hover img{transform:scale(1.05)}

    .paper-wrap{display:flex;flex-direction:column;gap:12px;align-items:center;padding:12px}
    .paper{width:100%;background: linear-gradient(180deg, rgba(255,255,255,0.6), rgba(250,245,240,0.9)), repeating-linear-gradient( -45deg, rgba(0,0,0,0.01) 0 1px, transparent 1px 5px );border-radius:12px;padding:18px;min-height:220px;box-shadow:inset 0 1px 0 rgba(255,255,255,0.6), 0 8px 20px rgba(107,45,58,0.04);position:relative;overflow:visible;}

    .envelope{width:100%;max-width:560px;perspective:1200px;display:flex;justify-content:center;margin-bottom:12px;}
    .letter{width:100%;transform-origin:top center;transition:transform .9s cubic-bezier(.2,.9,.3,1);position:relative;}
    .letter .sheet{background:linear-gradient(180deg,#fbf3ea,#f3e9dd);border-radius:8px;padding:22px 20px;box-shadow:0 10px 30px rgba(20,12,12,0.06);min-height:180px;font-size:15px;color:var(--muted);opacity:0;transform:translateY(6px);}
    .flap{position:absolute;top:-48px;left:50%;transform:translateX(-50%) rotateX(0deg);transform-origin:bottom center;width:62%;height:90px;background:linear-gradient(180deg,#e8d6c4,#f2e9dd);border-radius:8px;box-shadow:0 10px 24px rgba(0,0,0,0.08);transition:transform .9s cubic-bezier(.2,.9,.3,1);display:flex;align-items:center;justify-content:center;font-weight:600;color:#6b2d3a;}
    .flap:after{content:'';position:absolute;left:0;right:0;bottom:-22px;height:22px;background:linear-gradient(180deg, rgba(0,0,0,0.02), transparent);border-radius:0 0 8px 8px;}

    .letter.open{transform:translateY(-8px)}
    .letter.open .flap{transform:translateX(-50%) rotateX(180deg)}
    .letter.open .sheet{transform:translateY(0);opacity:1}

    .msg{white-space:pre-wrap;line-height:1.5;color:var(--text);font-family:Inter, sans-serif;font-size:15px}
    .cursor{display:inline-block;width:8px;height:18px;background:linear-gradient(180deg,#6b2d3a,#6b2d3a);margin-left:6px;vertical-align:bottom;animation:blink 1s steps(1) infinite}
    @keyframes blink{50%{opacity:0}}

    /* cora√ß√µes tipo bal√£o */
    .heart {
      position: absolute;
      width: 12px;
      height: 12px;
      background: red;
      transform: rotate(0deg);
      bottom: 0;
      animation: rise 4s linear forwards;
    }
    .heart::before,
    .heart::after {
      content: '';
      position: absolute;
      width: 12px;
      height: 12px;
      background: red;
      border-radius: 50%;
    }
    .heart::before { top: -6px; left: 0; }
    .heart::after { left: 6px; top: 0; }

    @keyframes rise {
      0% { transform: translateY(0) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-100vh) rotate(0deg); opacity: 0; }
    }

    .hearts {
      position: fixed;
      left: 0;
      bottom: 0;
      pointer-events: none;
      width: 100%;
      height: 100%;
      z-index: 90;
      overflow: visible;
    }

    footer{padding:14px 20px;border-top:1px solid rgba(0,0,0,0.04);display:flex;justify-content:space-between;align-items:center;gap:10px;flex-wrap:wrap}

    #mediaModal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.6);z-index:160;align-items:center;justify-content:center;padding:20px;overflow:auto}

    @media(max-width:920px){ .columns{grid-template-columns:1fr} }
    @media(max-width:560px){ header{padding:16px} .avatar{width:84px;height:84px} .card{padding:12px} .flap{top:-42px;height:74px} .columns{gap:12px} }
  </style>
</head>
<body>
  <div class="container" role="main" aria-labelledby="title">
    <header>
      <div class="avatar"><img src="assets/avatar.jpg" alt="Chelsea e Lucas"></div>
      <div class="meta">
        <h1 id="title">Para Chelsea Nicole com todo meu carinho.</h1>
        <p class="lead">Abra a carta para ver a mensagem que preparei pra voc√™! üíå</p>
      </div>
      <div class="controls" role="toolbar" aria-label="Controles">
        <button class="btn" id="playBtn" aria-pressed="false">‚ñ∂Ô∏é Tocar m√∫sica</button>
        <button class="btn ghost" id="surpriseBtn" aria-haspopup="dialog" aria-controls="letter">üíù Surpresa</button>
      </div>
    </header>

    <main>
      <div class="columns">
        <section class="card" aria-label="Mensagem introdut√≥ria">
          <h2>Um cantinho nosso</h2>
          <p class="story">Guardei aqui nossos sorrisos, carinhos e pequenos instantes que transformam dias comuns em mem√≥rias. Clique em "Surpresa" para abrir a carta que escrevi pra voc√™.</p>
          <h2>Momentos</h2>
          <div class="gallery" aria-hidden="false">
            <div class="thumb" data-type="image" data-src="assets/photo1.jpg" tabindex="0" aria-label="Foto 1"><img src="assets/photo1.jpg" alt="Foto nossa 1"></div>
            <div class="thumb" data-type="image" data-src="assets/photo2.jpg" tabindex="0" aria-label="Foto 2"><img src="assets/photo2.jpg" alt="Foto nossa 2"></div>
            <div class="thumb" data-type="video" data-src="assets/video1.mp4" tabindex="0" aria-label="V√≠deo nosso"><video muted playsinline src="assets/video1.mp4"></video></div>
            <div class="thumb" data-type="image" data-src="assets/photo3.jpg" tabindex="0" aria-label="Foto 3"><img src="assets/photo3.jpg" alt="Foto nossa 3"></div>
          </div>
        </section>

        <aside class="card paper-wrap" aria-label="Carta">
          <div class="envelope" aria-hidden="false">
            <div class="letter" id="letter" role="dialog" aria-label="Carta de anivers√°rio">
              <div class="flap" id="flap">Para voc√™</div>
              <div class="sheet" id="sheet">
                <div class="msg" id="msg"></div>
              </div>
            </div>
          </div>

          <div style="width:100%;display:flex;gap:8px;justify-content:center">
            <button class="btn" id="openBtn">Abrir carta</button>
            <button class="btn ghost" id="closeBtn">Fechar</button>
          </div>
        </aside>
      </div>
    </main>

    <footer>
      <div class="credit">Feito com <strong>üíñ</strong> por Lucas</div>
      <div class="hint">Clique nas imagens para ampliar ¬∑ Se o √°udio n√£o tocar automaticamente, pressione ‚ñ∂Ô∏é</div>
    </footer>
  </div>

  <div id="mediaModal" aria-hidden="true">
    <div style="max-width:920px;width:100%;max-height:85vh;overflow:auto;background:transparent;border-radius:12px" id="mediaContent"></div>
  </div>

  <div class="hearts" id="hearts"></div>

  <audio id="bgAudio" loop preload="metadata">
    <source src="assets/melody.mp3" type="audio/mpeg">
  </audio>

  <script>
  document.addEventListener('DOMContentLoaded', () => {

    const letterText = `Minha querida Chelsea Nicole,

Hoje √© um dia especial, o dia que Deus escolheu para trazer voc√™ ao mundo. Que cada can√ß√£o, cada riso e cada abra√ßo que voc√™ receber hoje sejam b√™n√ß√£os multiplicadas por Ele.
Voc√™ √© a calma que chega depois de um dia cheio, a luz que transforma nuvens cinzentas em dias de alegria. Amo o jeito que voc√™ fala, o jeito que seu sorriso ilumina tudo ao redor, e a serenidade que Deus te deu que me acalma mesmo nos momentos mais dif√≠ceis.
Amo cada detalhe: seu cafun√©, nossas piadas que s√≥ a gente entende, e aquele sorriso que me faz esquecer qualquer preocupa√ß√£o. Agrade√ßo a Deus por sua coragem, sua ternura e por cada momento que compartilhamos.
Neste dia, oro para que Ele continue guiando seus passos, que seus sonhos flores√ßam com Sua gra√ßa, e que nosso amor seja sempre aben√ßoado e protegido. Que sua vida seja repleta de alegria, sa√∫de, realiza√ß√µes e do infinito amor de Deus.

Feliz anivers√°rio, meu amor!
Com todo carinho, gratid√£o e muitos cheirinhos,
Lucas üíõ`;

    const flap = document.getElementById('flap');
    const letter = document.getElementById('letter');
    const sheet = document.getElementById('sheet');
    const msg = document.getElementById('msg');
    const openBtn = document.getElementById('openBtn');
    const closeBtn = document.getElementById('closeBtn');
    const surpriseBtn = document.getElementById('surpriseBtn');
    const playBtn = document.getElementById('playBtn');
    const heartsWrap = document.getElementById('hearts');
    const bgAudio = document.getElementById('bgAudio');

    function typeWriter(element, text, speed = 40) {
      element.textContent = '';
      let i = 0;
      return new Promise(resolve => {
        function next() {
          element.textContent = text.slice(0,i);
          i++;
          if(i<=text.length){
            let ch=text[i-1]; 
            let delay = speed; 
            if(ch=='\n') delay = speed*6;
            setTimeout(next, delay);
          } else resolve();
        }
        next();
      });
    }

    function spawnHeart() {
      const heart = document.createElement('div');
      heart.className = 'heart';
      heart.style.left = Math.random() * 90 + 'vw';
      heart.style.background = `hsl(${Math.random()*360},70%,60%)`;
      heart.style.animationDuration = (3 + Math.random()*2) + 's';
      heartsWrap.appendChild(heart);
      setTimeout(() => heart.remove(), 4000);
    }

    async function openLetter(){
      if(letter.classList.contains('open')) return;
      letter.classList.add('open');
      sheet.style.opacity='1';
      sheet.style.transform='translateY(0)';
      
      const heartInterval = setInterval(spawnHeart, 300);

      try{ await bgAudio.play(); updatePlayBtn(); }catch(e){}

      await typeWriter(msg,letterText,40);

      clearInterval(heartInterval);
    }

    function closeLetter(){
      letter.classList.remove('open');
      sheet.style.transform='translateY(6px)'; sheet.style.opacity='0';
      msg.textContent='';
    }

    function updatePlayBtn(){
      if(bgAudio.paused){ playBtn.textContent='‚ñ∂Ô∏é Tocar m√∫sica'; playBtn.setAttribute('aria-pressed','false'); }
      else{ playBtn.textContent='‚ùö‚ùö Pausar'; playBtn.setAttribute('aria-pressed','true'); }
    }

    const gallery=document.querySelectorAll('.thumb');
    const mediaModal=document.getElementById('mediaModal');
    const mediaContent=document.getElementById('mediaContent');

    gallery.forEach(t=>{
      t.addEventListener('click',()=>{
        const type=t.dataset.type, src=t.dataset.src;
        mediaContent.innerHTML='';
        if(type==='video'){
          const v=document.createElement('video'); v.src=src; v.controls=true; v.autoplay=true; v.style.width='100%'; v.style.borderRadius='10px'; mediaContent.appendChild(v);
        } else {
          const img=document.createElement('img'); img.src=src; img.style.width='100%'; img.style.borderRadius='10px'; mediaContent.appendChild(img);
        }
        mediaModal.style.display='flex'; mediaModal.setAttribute('aria-hidden','false');
      });
    });

    mediaModal.addEventListener('click',e=>{
      if(e.target===mediaModal){ mediaModal.style.display='none'; mediaContent.innerHTML=''; mediaModal.setAttribute('aria-hidden','true'); }
    });

    document.addEventListener('keydown',e=>{
      if(e.key==='Escape'){ if(mediaModal.style.display==='flex') mediaModal.click(); if(letter.classList.contains('open')) closeLetter(); }
    });

    openBtn.addEventListener('click',openLetter);
    closeBtn.addEventListener('click',closeLetter);
    surpriseBtn.addEventListener('click',openLetter);
    playBtn.addEventListener('click',async()=>{
      try{ if(bgAudio.paused) await bgAudio.play(); else bgAudio.pause(); }catch(e){ alert('Toque para permitir √°udio'); }
      updatePlayBtn();
    });

  });
  </script>
</body>
</html>
